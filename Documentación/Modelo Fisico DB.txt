create table users(
	identification varchar(50) primary key,
	password varchar(150) not null,
	name varchar(100) not null,
	email varchar(100) not null,
	birthdate date not null,
	country_code varchar(4) not null,
	phone varchar(15) not null,
	occupation varchar(100) not null,
	postal_code varchar(50) not null,
	marital_status varchar(100) not null,
	ubication varchar(200) not null,
	code varchar(4) not null,
	verification bit not null
);

create table violence_type(
	id int identity(1,1) primary key,
	name varchar(100) not null,
	description varchar(200) not null
);

create table organization(
	nit varchar(50) primary key,
	--organizationType
	name varchar(100) not null,
	tel varchar(15) not null
);

create table site(
	id int identity(1,1) primary key, 
	nit varchar(50),
	ubication varchar(150) not null,
	range int not null,
	country_code varchar(4) not null,
	phone varchar(15) not null,
	tel varchar(15) not null,
	Foreign Key(nit) References organization(nit),
);

create table violence_types_organization(
	nit varchar(50),
	id_violence int,
	primary key(nit, id_violence)
);

create table organization_type(
	id int identity(1,1) primary key,
	name varchar(100) not null,
	description varchar(200) not null
);

create table state(
	id int identity(1,1) primary key,
	name varchar(100) not null,
	description varchar(200) not null
);

create table notify(
	id int identity(1,1) primary key,
	user_id varchar(50) not null,
	title varchar(100) not null,
	state_id int not null,
	description varchar(200) not null,
	organization_type_id int not null,
	Foreign Key(user_id) References users(identification),
	Foreign Key(state_id) References state(id),
	Foreign Key(organization_type_id) References organization_type(id),
);

INSERT INTO users (
	identification,
	password,
	name,
	email,
	birthdate,
	country_code,
	phone,
	occupation,
	postal_code,
	marital_status,
	ubication,
	code,
	verification
) VALUES(
	'123456789',
	'Pass1234',
	'Johan Silva',
	'jsilva@outlook.com',
	'2001-08-13',
	'+57',
	'30024586521',
	'Student', 
	'4568521', 
	'Single', 
	'4.814728643996052, -74.35717137616184',
	'9514',
	'0'
);

insert into organization_type(name,description) VALUES('Police','Police Entity government');

insert into state(name,description) VALUES ('Active','this alert is active');

insert into state(name,description) VALUES ('serviced','this alert is serviced');

Insert Into notify(user_id,title,state_id,description,organization_type_id) VALUES('123456789','Alerta',1,'I Need Help',1);

INSERT INTO organization(nit,name,tel) VALUES ('8032546897','Policia Nacional','7532158');

INSERT INTO site(nit,ubication,range,country_code,phone,tel) VALUES (
	'8032546897','15.4562, -52.45845',20,'+57','2651205','502121'
);

INSERT INTO violence_type(name,description) VALUES ('Violencia de Genero','dirigida a las mujeres por el mero hecho de serlo, es decir, por considerar que el sexo femenino es inferior');


Scaffold-DbContext "Server=localhost\SQLEXPRESS;Database=vigendb; Trusted_Connection=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -f
